extends ../../layout/default.pug

block main 

  h1.title Products

  .container-fluid.pt-2
    // FILTER START
    .card.shadow-css.p-3.mb-5
      form(action='' form-filter)
        .card-body
          h2.card-title.pb-3 Filter
          .row
            .col-4
              label.form-label(for='filter-name') Filter name: 
              input.form-control(type='text' placeholder="Input name ..." id="filter-name")
            .col-4
              label.form-label(for='filter-active') Filter active: 
              select.form-select(name='' id='filter-active')
                option(value="") All
                option(value="active") Active 
                option(value="inactive") Inactive   
            .col-4
              label.form-label(for='filter-sort') Filter sort: 
              select.form-select(name='' id='filter-sort')
                option(value="") Sort 
                option(value="position-desc") Vị trí giảm dần  
                option(value="position-asc") Vị trí tăng dần
                option(value="price-desc") Giá giảm dần
                option(value="price-ase") Giá tăng dần
                option(value="title-desc") Tiêu đề từ Z-A
                option(value="title-ase") Tiêu đề từ A-Z  
          .row.mt-2
            .col-3
              button.btn.btn-primary(type="submit" btn-filter)
                <i class="fa-solid fa-filter mr-1"></i> Filter
    // FILTER END
    // LIST PRODUCTS START
    .card.shadow-css.p-3.mb-5
      .card-body
        h2.card-title.pb-3 List Prodcuts
        .row
          .col-6
            .input-group
              input.form-control(type='file')
              button.btn.btn-success  + Import
              button.btn.btn-secondary  - Export
          .col-1
          .col-4
            form(action="")
              .input-group
                select.form-select(name='' id='')
                  option(disable selected) Choose active
                  option(value="active") Active 
                  option(value="inactive") Inactive 
                  option(value="delete") Delete
                  option(value="position") Sort postion 
                button.btn.btn-primary(type="submit") Apply Action 
          .col-1
            button.btn.btn-primary  + New
        .row.p-2.mt-3
          table.table-css.mb-5
            thead
              tr
                td(scope='col') #
                td(scope='col') Image
                td(scope='col') Title
                td(scope='col') Price
                td(scope='col') Position
                td(scope='col') Status
                td(scope='col') Action
            tbody
              each item, index in products 
                tr 
                  th(scope='row' style="padding: 0px 20px") #{index + 1}
                  td 
                    img(src=item.thumbnail, alt="", width='200px' class="img-thumbnail")
                  td=item.title
                  td #{item.price}$
                  td 
                    form(
                      action="" 
                      form-change-position
                      method="POST"
                      data-path=`${prefixAdmin}/products/change-position`
                    )
                      input(
                        change-position
                        type="text"
                        min="1"
                        name="position"
                        value=item.position 
                        idItem=item.id
                        class="form-control"
                        style="width: 70px"
                      ) 
                  td 
                    if(item.status == "active")
                      a(
                        href="javascript:;" 
                        btn-change-status
                        itemStatus=item.status 
                        itemId=item.id
                        class='badge badge-success p-2'
                        style="font-size: 0.9rem"
                      ) Active
                    else 
                      a(
                        href="javascript:;" 
                        btn-change-status
                        itemStatus=item.status 
                        itemId=item.id
                        class='badge badge-danger p-2'
                        style="font-size: 0.9rem"
                      ) Inactive
                  td  
                    a(
                      href=`${prefixAdmin}/products/edit/${item.id}`
                      class='btn btn-warning btn-sm p-2 m-2'
                      style="font-size: 0.9rem"
                      data-bs-toggle="tooltip" 
                      data-bs-placement="top" 
                      data-bs-offset="0,10"
                      data-bs-custom-class="custom-tooltip"
                      title="Edit"
                    ) <i class="fa-solid fa-pen-to-square"></i>
                    button(
                      class='btn btn-danger btn-sm p-2 m-2'
                      button-delete
                      data-id=item.id
                      style="font-size: 0.9rem"
                      data-bs-toggle="tooltip" 
                      data-bs-placement="top"
                      data-bs-offset="0,10"
                      data-bs-custom-class="custom-tooltip"
                      title="Delete"
                    ) <i class="fa-regular fa-trash"></i>


        .row
          .col-10
            nav(aria-label='Page navigation example')
              ul.pagination
                li.page-item
                  button.page-link(page-pagination=pagination.currentPage-1)
                    span(aria-hidden='true') &laquo;
                - for(let i = 1; i <= pagination.totalPage; i ++) 
                  li(class=`page-item ${pagination.currentPage == i ? "active" : ""}`)
                    button.page-link(page-pagination=i) #{i}
                li.page-item
                  button.page-link(page-pagination=pagination.currentPage+1)
                    span(aria-hidden='true') &raquo;
          .col
            form(
              action=""
              form-number-items-page
            )
              select.form-select(name='numberItemPage' select-number-items-page)
                - for (let i = 4; i <= 10; i += 2)
                  option(value=i selected=(pagination.limitItem == i ? true : false)) #{i} items per page

              
    // LIST PRODUCTS END
  script(src="/js/admin/filter.js")
  script(src="/js/admin/pagination.js")
  script(src="/js/admin/changePosition.js")