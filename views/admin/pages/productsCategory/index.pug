extends ../../layout/default.pug


block main 

  h1=titlePage

  .card.mb-3 
    .card-header Danh sách danh mục
    .card-body 
      .row 
        .col-10 
        .col-2 
          a(href=`${prefixAdmin}/products-category/create`
            class="btn btn-success"
          ) Thêm danh mục
      table(
        class="table table-hover"
      )
        thead 
          tr
            th(scope='col') STT 
            th(scope='col') Hình ảnh 
            th(scope='col') Tên danh mục
            th(scope='col') Danh mục cha  
            th(scope='col') Vị trí
            th(scope='col') Trạng thái
            th(scope='col') Hành động
        tbody 
          each item, index in productCategory 
            tr
              th(scope='row') #{index + 1}
              td 
                img(src=item.thumbnail, alt="" class="thumnail-item")
              td #{item.title}
              td 
                if(item.parent_Id != "") 
                  - const parentitem = productCategory.find(ele => ele.id == item.parent_Id)
                  #{parentitem ? parentitem.title : 'Error'}
                else 
                  ='Danh mục cha'
              td
                input(
                  type="number"
                  min='1'
                  name='position'
                  value=item.position 
                  style="width: 50px"
                )
              td 
                  if(item.status == "active")
                    a(
                      href="javascript:;" 
                      btn-change-status
                      itemStatus=item.status 
                      itemId=item.id
                      class='badge badge-success'
                    ) Hoạt động
                  else 
                    a(
                      href="javascript:;" 
                      btn-change-status
                      itemStatus=item.status 
                      itemId=item.id
                      class='badge badge-danger'
                    ) Dừng hoạt động
              td  
                a(
                  href=`${prefixAdmin}/products-category/edit/${item.id}`
                  class='btn btn-warning btn-sm'
                ) Sửa
                button(
                  class='btn btn-danger btn-sm'
                  button-delete
                  data-id=item.id
                  ) Xoá

  form(
    action=""
    method="POST"
    id='form-change-status'
    data-path=`${prefixAdmin}/products-category/change-status`
  ) 

  form(
    action=""
    method="POST"
    id='form-delete'
    data-path=`${prefixAdmin}/products-category/delete-category`
  )

  script(src="/js/admin/changeStatus.js") 
  script(src="/js/admin/deleteProduct.js") 